<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Absolute Minimal Test</title>
    <script type="module" src="./packages/core/dist/siemens-ix/siemens-ix.esm.js"></script>
    <link rel="stylesheet" href="./packages/core/dist/siemens-ix/siemens-ix.css">
    <style>
        body {
            background: #1a1a1a;
            color: white;
            padding: 20px;
        }
        .debug {
            background: #333;
            padding: 10px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>Absolute Minimal Test</h1>

    <ix-device-status-chart id="chart"></ix-device-status-chart>

    <div id="debug" class="debug">Loading...</div>

    <script>
        setTimeout(() => {
            const chart = document.getElementById('chart');
            const debug = document.getElementById('debug');

            let info = 'Chart Analysis:\n';
            info += `Element exists: ${!!chart}\n`;
            info += `Shadow root: ${!!chart?.shadowRoot}\n`;

            if (chart?.shadowRoot) {
                const bars = chart.shadowRoot.querySelectorAll('.bar');
                const containers = chart.shadowRoot.querySelectorAll('.bar-container');
                const rows = chart.shadowRoot.querySelectorAll('.chart-row');

                info += `Chart rows: ${rows.length}\n`;
                info += `Bar containers: ${containers.length}\n`;
                info += `Bars found: ${bars.length}\n`;

                // Check if bars have content
                bars.forEach((bar, i) => {
                    const rect = bar.getBoundingClientRect();
                    const styles = window.getComputedStyle(bar);
                    info += `Bar ${i}: ${rect.width}x${rect.height}, bg: ${styles.backgroundColor}\n`;
                });

                // Check container content
                containers.forEach((container, i) => {
                    info += `Container ${i} children: ${container.children.length}\n`;
                    Array.from(container.children).forEach((child, j) => {
                        info += `  Child ${j}: ${child.tagName} ${child.className}\n`;
                    });
                });
            }

            debug.textContent = info;
        }, 2000);
    </script>
</body>
</html>
