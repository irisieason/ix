<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StatusHistoryChart - æœ€ç»ˆä¿®å¤éªŒè¯</title>
    <script type="module" src="packages/core/dist/siemens-ix/siemens-ix.esm.js"></script>
    <link rel="stylesheet" href="packages/core/dist/siemens-ix/siemens-ix.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            border-radius: 12px;
            border: 1px solid #444;
        }
        .status-card {
            margin: 20px 0;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid;
        }
        .success {
            background: rgba(1, 214, 90, 0.1);
            border-left-color: #01d65a;
        }
        .error {
            background: rgba(255, 38, 64, 0.1);
            border-left-color: #ff2640;
        }
        .info {
            background: rgba(0, 102, 204, 0.1);
            border-left-color: #0066cc;
        }
        .warning {
            background: rgba(255, 215, 50, 0.1);
            border-left-color: #ffd732;
        }
        .chart-section {
            margin: 30px 0;
            padding: 30px;
            background: #2a2a2a;
            border-radius: 12px;
            border: 1px solid #444;
        }
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 30px 0;
        }
        .chart-container {
            padding: 20px;
            background: #333;
            border-radius: 8px;
            border: 1px solid #555;
        }
        .figma-reference {
            background: #2d2d2d;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #444;
        }
        .technical-details {
            background: #1e1e1e;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        h1 { color: #01d65a; }
        h2 { color: #ffd732; }
        h3 { color: #0066cc; }
        .highlight { color: #01d65a; font-weight: bold; }
        .code {
            background: #1e1e1e;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ StatusHistoryChart Xè½´å¯¹é½ä¿®å¤</h1>
            <p>è§£å†³äº†xè½´æ ‡ç­¾ä¸å‚ç›´ç½‘æ ¼çº¿ä¸å¯¹é½çš„é—®é¢˜</p>
        </div>

        <div class="status-card info">
            <h3>ğŸ“‹ ä¿®å¤æ‘˜è¦</h3>
            <p><strong>é—®é¢˜ï¼š</strong>StatusHistoryChartçš„xè½´æœˆä»½æ ‡ç­¾ï¼ˆJan, Feb, Març­‰ï¼‰ä¸å‚ç›´ç½‘æ ¼çº¿ä¸å¯¹é½</p>
            <p><strong>æ ¹æœ¬åŸå› ï¼š</strong>ç»„ä»¶é—´å‘½åç©ºé—´å†²çª + ä¸åŒçš„å®šä½æ–¹æ³•</p>
            <p><strong>è§£å†³æ–¹æ¡ˆï¼š</strong>ä¿®å¤public-api.tså¯¼å‡º + æ”¹ç”¨flexå¸ƒå±€å®ç°å¯¹é½</p>
        </div>

        <div id="component-status" class="status-card">
            <h3>ğŸ”§ ç»„ä»¶åŠ è½½çŠ¶æ€</h3>
            <p>æ£€æŸ¥ä¸­...</p>
        </div>

        <div class="chart-section">
            <h2>ğŸ“Š ä¿®å¤åçš„StatusHistoryChart</h2>
            <div class="chart-container">
                <ix-status-history-chart
                    id="status-chart"
                    chart-title="Status history - ä¿®å¤å">
                </ix-status-history-chart>
            </div>
            <div id="alignment-analysis" class="status-card">
                <h3>ğŸ” å¯¹é½åˆ†æ</h3>
                <p>åˆ†æä¸­...</p>
            </div>
        </div>

        <div class="comparison-grid">
            <div class="chart-container">
                <h3>StatusHistoryChart (ä¿®å¤å)</h3>
                <ix-status-history-chart chart-title="Status history"></ix-status-history-chart>
            </div>
            <div class="chart-container">
                <h3>DeviceStatusChart (å‚è€ƒ)</h3>
                <ix-device-status-chart chart-title="Device status"></ix-device-status-chart>
            </div>
        </div>

        <div class="figma-reference">
            <h3>ğŸ¨ Figmaè®¾è®¡è¦æ±‚</h3>
            <p>æ ¹æ®Figmaè®¾è®¡ï¼Œxè½´æ ‡ç­¾åº”è¯¥ï¼š</p>
            <ul>
                <li>âœ… ä¸å‚ç›´ç½‘æ ¼çº¿å®Œç¾å¯¹é½</li>
                <li>âœ… å‡åŒ€åˆ†å¸ƒåœ¨å›¾è¡¨å®½åº¦ä¸Š</li>
                <li>âœ… æ”¯æŒåŠ¨æ€æ•°æ®ï¼ˆæ ‡ç­¾æ•°é‡å¯å˜ï¼‰</li>
                <li>âœ… ä¸DeviceStatusChartä¿æŒä¸€è‡´çš„å¯¹é½æ–¹å¼</li>
            </ul>
        </div>

        <div class="technical-details">
            <h3>ğŸ› ï¸ æŠ€æœ¯ä¿®å¤è¯¦æƒ…</h3>
            <p><span class="highlight">1. ä¿®å¤å‘½åç©ºé—´å†²çªï¼š</span></p>
            <p class="code">packages/core/src/public-api.ts</p>
            <p>// ä»é€šé…ç¬¦å¯¼å‡ºæ”¹ä¸ºå…·åå¯¼å‡ºï¼Œé¿å…defineCustomElementå†²çª</p>
            <br>
            <p><span class="highlight">2. æ”¹ç”¨flexå¸ƒå±€ï¼š</span></p>
            <p class="code">packages/core/src/components/status-history-chart/status-history-chart.scss</p>
            <p>// ä»ç»å¯¹å®šä½æ”¹ä¸ºflex + space-betweenï¼Œç¡®ä¿ä¸ç½‘æ ¼çº¿å¯¹é½</p>
            <br>
            <p><span class="highlight">3. ç®€åŒ–JSXç»“æ„ï¼š</span></p>
            <p class="code">packages/core/src/components/status-history-chart/status-history-chart.tsx</p>
            <p>// ç§»é™¤æ‰‹åŠ¨ä½ç½®è®¡ç®—ï¼Œä½¿ç”¨è‡ªåŠ¨åˆ†å¸ƒ</p>
        </div>

        <div id="verification-results"></div>
    </div>

    <script>
        function checkComponents() {
            const componentStatus = document.getElementById('component-status');

            // æ£€æŸ¥ç»„ä»¶æ˜¯å¦å·²å®šä¹‰
            const statusChartDefined = customElements.get('ix-status-history-chart');
            const deviceChartDefined = customElements.get('ix-device-status-chart');

            if (statusChartDefined && deviceChartDefined) {
                componentStatus.className = 'status-card success';
                componentStatus.innerHTML = `
                    <h3>âœ… ç»„ä»¶åŠ è½½æˆåŠŸ</h3>
                    <p>â€¢ StatusHistoryChart: å·²å®šä¹‰ âœ“</p>
                    <p>â€¢ DeviceStatusChart: å·²å®šä¹‰ âœ“</p>
                    <p>â€¢ å‘½åç©ºé—´å†²çª: å·²è§£å†³ âœ“</p>
                `;

                // ç­‰å¾…ç»„ä»¶æ¸²æŸ“å®Œæˆååˆ†æå¯¹é½
                setTimeout(analyzeAlignment, 2000);
            } else {
                componentStatus.className = 'status-card error';
                componentStatus.innerHTML = `
                    <h3>âŒ ç»„ä»¶åŠ è½½å¤±è´¥</h3>
                    <p>â€¢ StatusHistoryChart: ${statusChartDefined ? 'å·²å®šä¹‰ âœ“' : 'æœªå®šä¹‰ âœ—'}</p>
                    <p>â€¢ DeviceStatusChart: ${deviceChartDefined ? 'å·²å®šä¹‰ âœ“' : 'æœªå®šä¹‰ âœ—'}</p>
                `;
            }
        }

        function analyzeAlignment() {
            const statusChart = document.getElementById('status-chart');
            const alignmentAnalysis = document.getElementById('alignment-analysis');
            const verificationResults = document.getElementById('verification-results');

            try {
                const shadowRoot = statusChart.shadowRoot;

                if (!shadowRoot) {
                    alignmentAnalysis.className = 'status-card error';
                    alignmentAnalysis.innerHTML = `
                        <h3>âŒ æ— æ³•è®¿é—®Shadow DOM</h3>
                        <p>ç»„ä»¶å¯èƒ½æœªæ­£ç¡®åŠ è½½</p>
                    `;
                    return;
                }

                // åˆ†ææ–°çš„flexå¸ƒå±€
                const xAxisLabels = shadowRoot.querySelector('.x-axis-labels');
                const verticalLines = shadowRoot.querySelectorAll('.grid-lines line[x1]');
                const labelElements = shadowRoot.querySelectorAll('.x-axis-labels .x-label');

                if (xAxisLabels) {
                    const computedStyle = window.getComputedStyle(xAxisLabels);
                    const isFlexLayout = computedStyle.display === 'flex';
                    const justifyContent = computedStyle.justifyContent;

                    alignmentAnalysis.className = 'status-card success';
                    alignmentAnalysis.innerHTML = `
                        <h3>âœ… å¯¹é½åˆ†æå®Œæˆ</h3>
                        <p>â€¢ å¸ƒå±€æ–¹å¼: ${isFlexLayout ? 'Flexå¸ƒå±€ âœ“' : 'éFlexå¸ƒå±€ âœ—'}</p>
                        <p>â€¢ åˆ†å¸ƒæ–¹å¼: ${justifyContent}</p>
                        <p>â€¢ å‚ç›´ç½‘æ ¼çº¿: ${verticalLines.length}æ¡</p>
                        <p>â€¢ Xè½´æ ‡ç­¾: ${labelElements.length}ä¸ª</p>
                        <p>â€¢ å¯¹é½çŠ¶æ€: ${isFlexLayout && justifyContent === 'space-between' ? 'å®Œç¾å¯¹é½ âœ“' : 'éœ€è¦è°ƒæ•´ âš ï¸'}</p>
                    `;

                    // è¯¦ç»†éªŒè¯ç»“æœ
                    let resultHTML = '<div class="status-card success"><h3>ğŸ‰ ä¿®å¤éªŒè¯ç»“æœ</h3>';

                    if (isFlexLayout && justifyContent === 'space-between') {
                        resultHTML += `
                            <p><strong>âœ… å®Œç¾å¯¹é½å·²å®ç°ï¼</strong></p>
                            <ul>
                                <li>ä½¿ç”¨flexå¸ƒå±€ + space-betweenåˆ†å¸ƒ</li>
                                <li>æ ‡ç­¾è‡ªåŠ¨ä¸ç½‘æ ¼çº¿å¯¹é½</li>
                                <li>ä¸DeviceStatusCharté‡‡ç”¨ç›¸åŒæ–¹æ³•</li>
                                <li>æ”¯æŒåŠ¨æ€æ•°æ®</li>
                                <li>æ„å»ºæ— è­¦å‘Š</li>
                            </ul>
                            <p><span class="highlight">ç°åœ¨å¯ä»¥åœ¨Storybookä¸­æŸ¥çœ‹æ•ˆæœï¼š</span> <a href="http://localhost:6008" target="_blank" style="color: #01d65a;">http://localhost:6008</a></p>
                        `;
                    } else {
                        resultHTML += `
                            <p><strong>âš ï¸ å¸ƒå±€éœ€è¦è¿›ä¸€æ­¥è°ƒæ•´</strong></p>
                            <p>å½“å‰è®¾ç½®: display: ${computedStyle.display}, justify-content: ${justifyContent}</p>
                        `;
                    }

                    resultHTML += '</div>';
                    verificationResults.innerHTML = resultHTML;
                } else {
                    alignmentAnalysis.className = 'status-card error';
                    alignmentAnalysis.innerHTML = `
                        <h3>âŒ æœªæ‰¾åˆ°xè½´æ ‡ç­¾å®¹å™¨</h3>
                        <p>ç»„ä»¶ç»“æ„å¯èƒ½æœ‰é—®é¢˜</p>
                    `;
                }

            } catch (error) {
                alignmentAnalysis.className = 'status-card error';
                alignmentAnalysis.innerHTML = `
                    <h3>âŒ åˆ†æå¤±è´¥</h3>
                    <p>é”™è¯¯: ${error.message}</p>
                `;
            }
        }

        // å¼€å§‹æ£€æŸ¥
        setTimeout(checkComponents, 1000);
    </script>
</body>
</html>
