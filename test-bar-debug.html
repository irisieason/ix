<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bar Chart Debug</title>
    <script type="module" src="./packages/core/dist/siemens-ix/siemens-ix.esm.js"></script>
    <link rel="stylesheet" href="./packages/core/dist/siemens-ix/siemens-ix.css">
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        .debug-info {
            background-color: #2a2a2a;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
            font-family: monospace;
            font-size: 12px;
        }
        .test-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <h3>Debug Information:</h3>
        <div id="debug-output">Loading...</div>
    </div>

    <div class="test-container">
        <h2>Simple Test</h2>
        <ix-device-status-chart
            id="test-chart"
            chart-title="Debug Test"
            y-axis-label="Category"
            x-axis-label="Count">
        </ix-device-status-chart>
    </div>

    <script>
        function debugChart() {
            const chart = document.getElementById('test-chart');
            const debugOutput = document.getElementById('debug-output');

            // Set simple test data
            const testData = {
                'Test A': { success: 10, warning: 5, alarm: 2, critical: 1 },
                'Test B': { success: 20, warning: 3, alarm: 1, critical: 0 }
            };

            console.log('Setting test data:', testData);
            chart.data = testData;

            // Debug information
            setTimeout(() => {
                const info = `
Chart Element: ${chart ? 'Found' : 'Not Found'}
Data Property: ${JSON.stringify(chart.data)}
Chart Title: ${chart.chartTitle}
Y-axis Label: ${chart.yAxisLabel}
X-axis Label: ${chart.xAxisLabel}

Shadow Root: ${chart.shadowRoot ? 'Present' : 'Missing'}
                `;

                debugOutput.innerHTML = `<pre>${info}</pre>`;

                // Check shadow DOM content
                if (chart.shadowRoot) {
                    const bars = chart.shadowRoot.querySelectorAll('.bar');
                    const barContainers = chart.shadowRoot.querySelectorAll('.bar-container');
                    const chartRows = chart.shadowRoot.querySelectorAll('.chart-row');

                    debugOutput.innerHTML += `<pre>
Shadow DOM Elements:
- Bar elements: ${bars.length}
- Bar containers: ${barContainers.length}
- Chart rows: ${chartRows.length}

Bar elements details:
${Array.from(bars).map((bar, i) => `  Bar ${i}: class="${bar.className}", style="${bar.getAttribute('style')}"`).join('\n')}
                    </pre>`;
                }
            }, 1000);
        }

        // Run debug after component loads
        setTimeout(debugChart, 500);
    </script>
</body>
</html>
