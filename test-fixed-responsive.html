<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixed Responsive Custom Card Test</title>
    <script type="module" src="./packages/core/dist/siemens-ix/siemens-ix.esm.js"></script>
    <link rel="stylesheet" href="./packages/core/dist/siemens-ix/siemens-ix.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #1a1a1a;
            color: white;
            margin: 0;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1, h2 {
            color: white;
            text-align: center;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .size-info {
            background: #333;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            margin-bottom: 20px;
            position: sticky;
            top: 10px;
            z-index: 100;
        }
        .card-container {
            display: flex;
            justify-content: center;
            margin: 20px 0;
            padding: 20px;
            border: 2px dashed #555;
            border-radius: 8px;
        }
        .flex-test {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        .grid-test {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .resize-handle {
            width: 100%;
            height: 10px;
            background: #007acc;
            cursor: ns-resize;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
            line-height: 10px;
            font-size: 10px;
            color: white;
        }
        .width-indicator {
            position: fixed;
            top: 50px;
            right: 10px;
            background: #007acc;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-family: monospace;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div class="width-indicator" id="width-indicator">
        Width: <span id="current-width">0</span>px
    </div>

    <div class="container">
        <h1>Fixed Responsive Custom Card Test</h1>
        <p style="text-align: center;">拖拽浏览器窗口边缘测试响应式行为</p>

        <div class="size-info" id="size-info">
            <strong>修复后的响应式设计：</strong><br>
            • 固定尺寸：474×332px (不会随意变化)<br>
            • 小屏幕 (≤480px)：100% 宽度，最小 320px<br>
            • 大屏幕 (≥1600px)：520×360px<br>
            • 移除了中间断点，避免奇怪的跳跃行为<br>
            • 当前窗口宽度：<span id="window-width">0</span>px
        </div>

        <div class="test-section">
            <h2>单个卡片测试</h2>
            <div class="card-container">
                <ix-custom-card id="main-card"></ix-custom-card>
            </div>
            <div id="card-dimensions" style="text-align: center; font-family: monospace; color: #ccc;">
                卡片尺寸：测量中...
            </div>
        </div>

        <div class="test-section">
            <h2>Flex 布局测试</h2>
            <p style="text-align: center; color: #ccc;">测试在 flex 容器中的行为</p>
            <div class="flex-test">
                <ix-custom-card card-title="Flex Card 1"></ix-custom-card>
                <ix-custom-card card-title="Flex Card 2"></ix-custom-card>
                <ix-custom-card card-title="Flex Card 3"></ix-custom-card>
            </div>
        </div>

        <div class="test-section">
            <h2>Grid 布局测试</h2>
            <p style="text-align: center; color: #ccc;">测试在 grid 容器中的行为</p>
            <div class="grid-test">
                <ix-custom-card card-title="Grid Card 1"></ix-custom-card>
                <ix-custom-card card-title="Grid Card 2"></ix-custom-card>
                <ix-custom-card card-title="Grid Card 3"></ix-custom-card>
                <ix-custom-card card-title="Grid Card 4"></ix-custom-card>
            </div>
        </div>

        <div class="test-section">
            <h2>窄容器测试</h2>
            <div style="max-width: 400px; margin: 0 auto; border: 2px solid #555; padding: 20px;">
                <ix-custom-card card-title="窄容器中的卡片"></ix-custom-card>
            </div>
        </div>

        <div class="test-section">
            <h2>超窄容器测试</h2>
            <div style="max-width: 300px; margin: 0 auto; border: 2px solid #555; padding: 20px;">
                <ix-custom-card card-title="超窄容器"></ix-custom-card>
            </div>
        </div>
    </div>

    <script>
        function updateDimensions() {
            const windowWidth = window.innerWidth;
            document.getElementById('current-width').textContent = windowWidth;
            document.getElementById('window-width').textContent = windowWidth;

            const mainCard = document.getElementById('main-card');
            if (mainCard) {
                const rect = mainCard.getBoundingClientRect();
                const dimensionsDiv = document.getElementById('card-dimensions');
                dimensionsDiv.textContent = `卡片尺寸：${Math.round(rect.width)}×${Math.round(rect.height)}px`;

                // 检查是否有奇怪的行为
                if (rect.width > windowWidth) {
                    dimensionsDiv.style.color = '#ff2640';
                    dimensionsDiv.textContent += ' ⚠️ 卡片宽度超过窗口！';
                } else {
                    dimensionsDiv.style.color = '#01d65a';
                }
            }
        }

        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('=== Fixed Responsive Test ===');
                updateDimensions();

                const cards = document.querySelectorAll('ix-custom-card');
                console.log('Cards found:', cards.length);

                cards.forEach((card, index) => {
                    const rect = card.getBoundingClientRect();
                    console.log(`Card ${index + 1}:`, {
                        width: Math.round(rect.width),
                        height: Math.round(rect.height),
                        title: card.cardTitle
                    });
                });
            }, 1000);
        });

        window.addEventListener('resize', () => {
            updateDimensions();
        });

        // 每秒更新一次，用于调试
        setInterval(updateDimensions, 1000);
    </script>
</body>
</html>
